<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freeland - พื้นที่อิสระของคนทำงาน</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts (Prompt for Thai) -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Prompt', sans-serif;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #c7d2fe; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a5b4fc; 
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        indigo: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1', // Main Primary
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white text-slate-700 selection:bg-indigo-200 selection:text-indigo-900 min-h-screen flex flex-col">

    <!-- Notification Container -->
    <div id="notification-container" class="fixed top-20 right-4 z-[100] transition-all duration-300 transform translate-x-full"></div>

    <!-- App Container -->
    <div id="app" class="flex-grow flex flex-col">
        <!-- Content will be injected here via JavaScript -->
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Mock Data ---
        const MOCK_JOBS = [
            { 
                id: 1, 
                title: 'ออกแบบโลโก้ร้านกาแฟ Pastel Style', 
                client: 'Cafe A.', 
                clientFull: 'Cafe Amazonite',
                budget: '2,500 - 5,000', 
                tags: ['Graphic Design', 'Logo'], 
                posted: '2 ชม. ที่แล้ว',
                description: 'เรากำลังมองหานักออกแบบกราฟิกที่มีประสบการณ์เพื่อออกแบบโลโก้สำหรับร้านกาแฟสไตล์ Minimalist เปิดใหม่ในย่านอารีย์ \n\nสิ่งที่ต้องการ:\n- โลโก้ที่ดูเรียบง่าย สบายตา\n- เน้นโทนสี Earth Tone (น้ำตาล, ครีม, เขียว)\n- สามารถนำไปใช้กับแก้วกาแฟและป้ายหน้าร้านได้ดี\n\nไฟล์ที่ต้องการ: AI, PNG, PDF',
                clientRating: 4.8,
                reviewCount: 12,
                images: [1, 2], 
                reviews: [
                    { id: 1, user: 'สมชาย ดีไซน์', rating: 5, comment: 'บรีฟชัดเจนมากครับ ทำงานด้วยง่าย จ่ายเงินไว', date: '2 วันที่แล้ว' },
                    { id: 2, user: 'Anna K.', rating: 4, comment: 'ลูกค้าใส่ใจรายละเอียดดีครับ แต่อาจจะต้องแก้งาน 1-2 รอบเพื่อให้ตรงใจที่สุด', date: '1 สัปดาห์ที่แล้ว' }
                ]
            },
            { 
                id: 2, 
                title: 'พัฒนาเว็บไซต์ Corporate ด้วย React', 
                client: 'Tech Co.', 
                clientFull: 'Tech Company Solutions', 
                budget: '20,000+', 
                tags: ['Web Dev', 'React'], 
                posted: '5 ชม. ที่แล้ว', 
                description: 'ต้องการ Web Developer พัฒนาเว็บไซต์บริษัท หน้า Landing Page และ About Us โดยใช้ React และ Tailwind CSS',
                clientRating: 5.0,
                reviewCount: 5,
                images: [1],
                reviews: [
                    { id: 3, user: 'Dev Master', rating: 5, comment: 'Requirements ชัดเจนมาก ทีมเทคนิคน่ารักครับ', date: '3 สัปดาห์ที่แล้ว' }
                ]
            },
            { 
                id: 3, 
                title: 'เขียนบทความ SEO เกี่ยวกับการท่องเที่ยว', 
                client: 'Travel Blog', 
                clientFull: 'World Travel Blog', 
                budget: '1,500', 
                tags: ['Writing', 'SEO'], 
                posted: '1 วันที่แล้ว', 
                description: 'เขียนบทความท่องเที่ยวญี่ปุ่น จำนวน 1000 คำ เน้น Keyword "เที่ยวโตเกียวด้วยตัวเอง" พร้อมหารูปประกอบ',
                clientRating: 4.5,
                reviewCount: 8,
                images: [],
                reviews: [
                    { id: 4, user: 'W. Writer', rating: 4, comment: 'งานสนุกครับ แต่เดดไลน์ค่อนข้างกระชั้นชิด', date: '1 เดือนที่แล้ว' }
                ]
            }
        ];

        const MOCK_FREELANCERS = [
            { 
                id: 101, 
                name: 'สมชาย ดีไซน์', 
                role: 'Senior Graphic Designer', 
                rate: '1,500/ชม.', 
                rating: 4.9, 
                location: 'กรุงเทพฯ',
                verified: true,
                about: 'กราฟิกดีไซเนอร์ประสบการณ์กว่า 5 ปี เชี่ยวชาญด้าน Branding และ Logo Design เน้นงานสไตล์ Minimal และ Modern เข้าใจการตลาดช่วยให้งานออกแบบตอบโจทย์ธุรกิจ',
                skills: ['Photoshop', 'Illustrator', 'Figma', 'Branding'],
                experience: '5 ปี',
                completedJobs: 42,
                services: [
                    { title: 'ออกแบบโลโก้ & CI Branding', price: 'เริ่มต้น 3,500 ฿' },
                    { title: 'ออกแบบสื่อโฆษณา Social Media', price: 'เริ่มต้น 1,000 ฿ / รูป' },
                    { title: 'ออกแบบ Packaging', price: 'เริ่มต้น 4,500 ฿' }
                ],
                portfolio: [1, 2, 3, 4],
                reviews: [
                    { id: 101, client: 'Coffee A.', rating: 5, comment: 'งานสวยมากครับ ตรงตามที่ต้องการเป๊ะ แนะนำเลย', date: '1 สัปดาห์ที่แล้ว' },
                    { id: 102, client: 'Beauty Shop', rating: 4.5, comment: 'ทำงานเร็ว แก้ไขงานได้รวดเร็วทันใจค่ะ', date: '1 เดือนที่แล้ว' }
                ]
            },
            { 
                id: 102, 
                name: 'เจนนี่ เดฟ', 
                role: 'Full Stack Developer', 
                rate: '2,000/ชม.', 
                rating: 5.0, 
                location: 'เชียงใหม่ (Remote)',
                verified: true,
                about: 'Full Stack Developer เชี่ยวชาญ JavaScript Stack (React, Node.js, Next.js) รับทำเว็บไซต์บริษัท E-commerce และ Web Application ทุกรูปแบบ',
                skills: ['React', 'Node.js', 'AWS', 'MongoDB'],
                experience: '4 ปี',
                completedJobs: 28,
                services: [
                    { title: 'พัฒนาเว็บไซต์ Corporate', price: 'เริ่มต้น 15,000 ฿' },
                    { title: 'ระบบ E-commerce', price: 'เริ่มต้น 35,000 ฿' }
                ],
                portfolio: [1, 2],
                reviews: [
                    { id: 103, client: 'Tech Startup', rating: 5, comment: 'Code สะอาด โครงสร้างดี พัฒนาต่อได้ง่ายครับ', date: '2 สัปดาห์ที่แล้ว' }
                ]
            }
        ];

        // --- State Management ---
        let state = {
            view: 'home',
            user: null,
            searchQuery: '',
            searchType: 'jobs', // 'jobs' or 'freelancers'
            selectedJob: null,
            selectedFreelancer: null,
            jobs: [...MOCK_JOBS],
            isMenuOpen: false
        };

        // --- Helper Components (HTML Strings) ---
        const Button = (text, onClickStr, variant = 'primary', extraClass = '') => {
            const baseStyle = "px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm flex items-center justify-center gap-2 cursor-pointer";
            const variants = {
                primary: "bg-indigo-400 text-white hover:bg-indigo-500 active:scale-95 shadow-sm shadow-indigo-100",
                secondary: "bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 hover:border-slate-300",
                outline: "border border-indigo-200 text-indigo-500 hover:text-indigo-600 hover:border-indigo-400 hover:bg-indigo-50",
                ghost: "text-slate-500 hover:text-indigo-500 hover:bg-indigo-50",
                active: "bg-indigo-50 text-indigo-600 border border-indigo-100"
            };
            return `<button onclick="${onClickStr}" class="${baseStyle} ${variants[variant]} ${extraClass}">${text}</button>`;
        };

        const Input = (label, type, placeholder, value = '', onInputStr = '', isTextarea = false) => {
            const inputClass = "w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 outline-none transition-all bg-slate-50 focus:bg-white text-slate-700";
            const el = isTextarea 
                ? `<textarea oninput="${onInputStr}" class="${inputClass} min-h-[120px] resize-none" placeholder="${placeholder}">${value}</textarea>`
                : `<input type="${type}" value="${value}" oninput="${onInputStr}" class="${inputClass}" placeholder="${placeholder}">`;
            
            return `
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-600 mb-1.5">${label}</label>
                    ${el}
                </div>
            `;
        };

        const Card = (content, onClickStr = '', extraClass = '') => {
            const clickAttr = onClickStr ? `onclick="${onClickStr}"` : '';
            const cursorClass = onClickStr ? 'cursor-pointer hover:border-indigo-200' : '';
            return `
                <div ${clickAttr} class="bg-white rounded-2xl border border-slate-100 shadow-sm hover:shadow-md hover:shadow-indigo-50 transition-all duration-300 ${cursorClass} ${extraClass}">
                    ${content}
                </div>
            `;
        };

        const Stars = (rating) => {
            let starsHtml = '<div class="flex text-amber-300 gap-0.5">';
            for (let i = 0; i < 5; i++) {
                const fillClass = i < Math.floor(rating) ? "fill-current" : "fill-none text-slate-200";
                starsHtml += `<i data-lucide="star" class="w-3 h-3 ${fillClass}"></i>`;
            }
            starsHtml += '</div>';
            return starsHtml;
        };

        // --- Core Logic ---
        
        function setView(viewName) {
            state.view = viewName;
            state.isMenuOpen = false;
            render();
        }

        function setUser(userData) {
            state.user = userData;
            render();
        }

        function toggleMenu() {
            state.isMenuOpen = !state.isMenuOpen;
            render();
        }

        function setSearchType(type) {
            state.searchType = type;
            render();
        }
        
        function updateSearchQuery(val) {
            state.searchQuery = val;
            render(); // Re-render to filter results immediately
        }

        function selectJob(id) {
            state.selectedJob = state.jobs.find(j => j.id === id);
            setView('job-detail');
        }

        function selectFreelancer(id) {
            state.selectedFreelancer = MOCK_FREELANCERS.find(f => f.id === id);
            setView('freelancer-detail');
        }

        function showNotification(msg, type = 'success') {
            const container = document.getElementById('notification-container');
            const colorClass = type === 'success' ? 'bg-teal-400' : 'bg-red-400';
            
            container.innerHTML = `
                <div class="px-6 py-3 rounded-2xl shadow-lg flex items-center gap-2 ${colorClass} text-white">
                    <i data-lucide="check-circle" class="w-5 h-5"></i>
                    <span class="font-medium text-sm">${msg}</span>
                </div>
            `;
            container.classList.remove('translate-x-full');
            lucide.createIcons();

            setTimeout(() => {
                container.classList.add('translate-x-full');
            }, 3000);
        }

        // --- Render Functions ---

        function renderNavbar() {
            const user = state.user;
            const menuClass = state.isMenuOpen ? 'block' : 'hidden';
            
            return `
                <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-indigo-50">
                    <div class="max-w-6xl mx-auto px-4 sm:px-6">
                        <div class="flex justify-between items-center h-16">
                            <div class="flex items-center cursor-pointer" onclick="setView('${user ? 'dashboard' : 'home'}')">
                                <div class="w-8 h-8 bg-indigo-400 rounded-xl flex items-center justify-center mr-2 shadow-sm shadow-indigo-200">
                                    <span class="text-white font-bold text-lg">F</span>
                                </div>
                                <span class="font-bold text-xl tracking-tight text-slate-700">Freeland</span>
                            </div>

                            <!-- Desktop Menu -->
                            <div class="hidden md:flex items-center space-x-6">
                                <button onclick="setView('job-board'); setSearchType('jobs')" class="text-sm font-medium transition-colors ${state.view === 'job-board' && state.searchType === 'jobs' ? 'text-indigo-500' : 'text-slate-500 hover:text-indigo-400'}">ค้นหางาน</button>
                                <button onclick="setView('job-board'); setSearchType('freelancers')" class="text-sm font-medium transition-colors ${state.view === 'job-board' && state.searchType === 'freelancers' ? 'text-indigo-500' : 'text-slate-500 hover:text-indigo-400'}">หาฟรีแลนซ์</button>
                                
                                ${user ? `
                                    <div class="flex items-center gap-4 pl-4 border-l border-slate-100">
                                        <button onclick="setView('post-job')" class="text-sm font-medium text-slate-700 hover:text-indigo-500">ลงงาน</button>
                                        <div class="relative group">
                                            <button class="flex items-center gap-2">
                                                <div class="w-8 h-8 rounded-full bg-indigo-50 border border-indigo-100 flex items-center justify-center text-indigo-500 font-medium">
                                                    ${user.name[0]}
                                                </div>
                                            </button>
                                            <div class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg border border-indigo-50 py-1 hidden group-hover:block">
                                                <button onclick="setView('profile')" class="block w-full text-left px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50">แก้ไขโปรไฟล์</button>
                                                <button onclick="setUser(null); setView('home')" class="block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-red-50">ออกจากระบบ</button>
                                            </div>
                                        </div>
                                    </div>
                                ` : `
                                    <div class="flex items-center gap-3">
                                        <button onclick="setView('login')" class="text-sm font-medium text-slate-600 hover:text-indigo-500">เข้าสู่ระบบ</button>
                                        ${Button('สมัครสมาชิก', "setView('register')", 'primary', '!py-2 !px-4 !rounded-full')}
                                    </div>
                                `}
                            </div>

                            <!-- Mobile Menu Button -->
                            <div class="md:hidden">
                                <button onclick="toggleMenu()" class="text-slate-500">
                                    <i data-lucide="${state.isMenuOpen ? 'x' : 'menu'}" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Mobile Menu -->
                    <div class="${menuClass} md:hidden bg-white border-t border-indigo-50 py-4 px-4 shadow-lg absolute w-full z-50">
                        <div class="flex flex-col space-y-4">
                            <button onclick="setView('job-board'); setSearchType('jobs')" class="text-left font-medium text-slate-600">ค้นหางาน</button>
                            <button onclick="setView('job-board'); setSearchType('freelancers')" class="text-left font-medium text-slate-600">หาฟรีแลนซ์</button>
                            ${user ? `
                                <button onclick="setView('profile')" class="text-left font-medium text-slate-600">โปรไฟล์ของฉัน</button>
                                <button onclick="setView('post-job')" class="text-left font-medium text-slate-600">ลงประกาศงาน</button>
                                <button onclick="setUser(null); setView('home')" class="text-left font-medium text-red-400">ออกจากระบบ</button>
                            ` : `
                                <button onclick="setView('login')" class="text-left font-medium text-slate-600">เข้าสู่ระบบ</button>
                                <button onclick="setView('register')" class="text-left font-medium text-slate-800">สมัครสมาชิก</button>
                            `}
                        </div>
                    </div>
                </nav>
            `;
        }

        function renderHome() {
            return `
                <div class="animate-fade-in">
                    <section class="pt-24 pb-16 px-4 text-center max-w-4xl mx-auto">
                        <div class="inline-block px-4 py-1.5 rounded-full bg-indigo-50 text-indigo-500 text-sm font-medium mb-6 border border-indigo-100">
                            ✨ แพลตฟอร์มสำหรับคนรุ่นใหม่ หัวใจพาสเทล
                        </div>
                        <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-slate-800 mb-6 leading-tight">
                            จ้างงานคุณภาพ <br class="hidden md:block" />
                            <span class="text-indigo-400">ในพื้นที่แห่งอิสระ Freeland</span>
                        </h1>
                        <p class="text-lg md:text-xl text-slate-500 mb-10 max-w-2xl mx-auto leading-relaxed">
                            เชื่อมต่อฟรีแลนซ์ฝีมือดีกับผู้ประกอบการที่เข้าใจงาน ด้วยบรรยากาศที่เป็นกันเอง เรียบง่าย และสดใส
                        </p>
                        <div class="flex flex-col sm:flex-row justify-center gap-4">
                            ${Button('เริ่มต้นใช้งานฟรี', "setView('register')", 'primary', '!py-3 !px-8 !text-base shadow-indigo-200')}
                            ${Button('ดูงานทั้งหมด', "setView('job-board'); setSearchType('jobs')", 'secondary', '!py-3 !px-8 !text-base')}
                        </div>
                    </section>
                    
                    <section class="bg-gradient-to-b from-white to-indigo-50/30 py-20 px-4 border-y border-indigo-50">
                        <div class="max-w-6xl mx-auto">
                            <div class="grid md:grid-cols-3 gap-8">
                                ${Card(`
                                    <div class="w-12 h-12 rounded-2xl flex items-center justify-center mb-6 bg-blue-100 text-blue-500">
                                        <i data-lucide="search" class="w-6 h-6"></i>
                                    </div>
                                    <h3 class="text-xl font-bold text-slate-800 mb-3">ค้นหาง่าย</h3>
                                    <p class="text-slate-500 leading-relaxed">ระบบคัดกรองที่เน้นความแม่นยำ ไม่เสียเวลา</p>
                                `, '', 'p-8 rounded-3xl')}
                                ${Card(`
                                    <div class="w-12 h-12 rounded-2xl flex items-center justify-center mb-6 bg-green-100 text-green-500">
                                        <i data-lucide="check-circle" class="w-6 h-6"></i>
                                    </div>
                                    <h3 class="text-xl font-bold text-slate-800 mb-3">ยืนยันตัวตน</h3>
                                    <p class="text-slate-500 leading-relaxed">ปลอดภัยด้วยระบบ Verified User ทั้งสองฝ่าย</p>
                                `, '', 'p-8 rounded-3xl')}
                                ${Card(`
                                    <div class="w-12 h-12 rounded-2xl flex items-center justify-center mb-6 bg-pink-100 text-pink-500">
                                        <i data-lucide="credit-card" class="w-6 h-6"></i>
                                    </div>
                                    <h3 class="text-xl font-bold text-slate-800 mb-3">ชำระเงินปลอดภัย</h3>
                                    <p class="text-slate-500 leading-relaxed">เงินของคุณจะถูกพักไว้จนกว่างานจะสำเร็จ</p>
                                `, '', 'p-8 rounded-3xl')}
                            </div>
                        </div>
                    </section>
                </div>
            `;
        }

        function renderAuth(isRegister) {
            const title = isRegister ? 'สร้างบัญชีใหม่' : 'ยินดีต้อนรับกลับมา';
            const btnText = isRegister ? 'ลงทะเบียน' : 'เข้าสู่ระบบ';
            const linkText = isRegister ? 'เข้าสู่ระบบ' : 'สมัครสมาชิก';
            const linkAction = isRegister ? "setView('login')" : "setView('register')";
            const submitAction = isRegister 
                ? "setUser({ name: 'New User', email: 'new@demo.com', role: 'client' }); setView('dashboard'); showNotification('ลงทะเบียนสำเร็จ!');"
                : "setUser({ name: 'คุณกิตติ (Demo)', email: 'user@demo.com', role: 'freelancer' }); setView('dashboard'); showNotification('เข้าสู่ระบบสำเร็จ');";

            return `
                <div class="min-h-[80vh] flex items-center justify-center px-4 py-12 bg-indigo-50/30">
                    <div class="bg-white w-full max-w-md p-8 md:p-10 border border-indigo-100 shadow-indigo-50 rounded-2xl">
                        <div class="text-center mb-8">
                            <h2 class="text-2xl font-bold text-slate-800">${title}</h2>
                            <p class="text-slate-500 mt-2 text-sm">กรอกข้อมูลเพื่อเข้าสู่ระบบ Freeland</p>
                        </div>
                        <form onsubmit="event.preventDefault(); ${submitAction}">
                            ${isRegister ? Input('ชื่อ-นามสกุล', 'text', 'เช่น สมชาย ใจดี') : ''}
                            ${Input('อีเมล', 'email', 'name@company.com')}
                            ${Input('รหัสผ่าน', 'password', '••••••••')}
                            
                            ${Button(btnText, '', 'primary', 'w-full mt-6 !py-3 shadow-indigo-200')}
                        </form>
                        <div class="mt-6 text-center text-sm text-slate-500">
                            ${isRegister ? 'มีบัญชีอยู่แล้ว? ' : 'ยังไม่มีบัญชี? '}
                            <button onclick="${linkAction}" class="text-indigo-500 font-semibold hover:underline">
                                ${linkText}
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderJobBoard() {
            const isJobs = state.searchType === 'jobs';
            const filteredJobs = state.jobs.filter(j => 
                j.title.toLowerCase().includes(state.searchQuery.toLowerCase()) || 
                j.tags.some(t => t.toLowerCase().includes(state.searchQuery.toLowerCase()))
            );
            const filteredFreelancers = MOCK_FREELANCERS.filter(f => 
                f.name.toLowerCase().includes(state.searchQuery.toLowerCase()) ||
                f.role.toLowerCase().includes(state.searchQuery.toLowerCase())
            );

            let contentHtml = '';

            if (isJobs) {
                if (filteredJobs.length > 0) {
                    contentHtml = filteredJobs.map(job => Card(`
                        <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                            <div>
                                <h4 class="font-bold text-slate-800 text-lg group-hover:text-indigo-500 transition-colors">${job.title}</h4>
                                <div class="flex gap-4 mt-2 text-sm text-slate-500">
                                    <span class="flex items-center gap-1"><i data-lucide="briefcase" class="w-3 h-3"></i> ${job.client}</span>
                                    <span class="flex items-center gap-1"><i data-lucide="clock" class="w-3 h-3"></i> ${job.posted}</span>
                                </div>
                                <div class="flex gap-2 mt-3">
                                    ${job.tags.map(tag => `<span class="px-2 py-0.5 bg-indigo-50 text-indigo-500 text-xs rounded-full border border-indigo-100">${tag}</span>`).join('')}
                                </div>
                            </div>
                            <div class="flex flex-col items-start sm:items-end gap-3 min-w-[120px]">
                                <span class="font-bold text-indigo-500">${job.budget} ฿</span>
                                ${Button('จ้างงาน', `event.stopPropagation(); setView('payment')`, 'primary', '!text-xs shadow-indigo-100')}
                            </div>
                        </div>
                    `, `selectJob(${job.id})`, 'p-6 group')).join('');
                } else {
                    contentHtml = '<div class="text-center py-12 text-slate-400">ไม่พบงานที่ค้นหา</div>';
                }
            } else {
                if (filteredFreelancers.length > 0) {
                    contentHtml = filteredFreelancers.map(f => Card(`
                        <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                            <div class="flex items-center gap-4">
                                <div class="w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center text-xl font-bold text-indigo-400">
                                    ${f.name[0]}
                                </div>
                                <div>
                                    <h4 class="font-bold text-slate-800 text-lg flex items-center gap-1">
                                        ${f.name}
                                        ${f.verified ? '<i data-lucide="shield" class="w-3 h-3 text-teal-400 fill-current"></i>' : ''}
                                    </h4>
                                    <p class="text-sm text-slate-500">${f.role}</p>
                                    <div class="flex gap-2 mt-2">
                                        ${f.skills.map(s => `<span class="text-xs bg-slate-50 px-2 py-1 rounded-full text-slate-600 border border-slate-100">${s}</span>`).join('')}
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center gap-4 border-t sm:border-t-0 pt-4 sm:pt-0 mt-2 sm:mt-0 justify-between sm:justify-end w-full sm:w-auto">
                                <div class="text-right mr-4">
                                    <p class="font-bold text-indigo-500">${f.rate}</p>
                                    <div class="flex items-center justify-end gap-1 text-xs">${Stars(f.rating)} ${f.rating}</div>
                                </div>
                                ${Button('จ้างงาน', `event.stopPropagation(); setView('payment')`, 'primary', '!text-xs shadow-indigo-100')}
                            </div>
                        </div>
                    `, `selectFreelancer(${f.id})`, 'p-6')).join('');
                } else {
                    contentHtml = '<div class="text-center py-12 text-slate-400">ไม่พบฟรีแลนซ์ที่ค้นหา</div>';
                }
            }

            return `
                <div class="pt-8 min-h-screen">
                    <div class="max-w-6xl mx-auto px-4">
                        <div class="flex flex-col md:flex-row justify-between items-end md:items-center mb-8 gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800 mb-2">ตลาดงานและฟรีแลนซ์</h2>
                                <div class="flex gap-2 bg-slate-50 p-1 rounded-xl inline-flex border border-slate-100">
                                    <button onclick="setSearchType('jobs')" class="px-4 py-1.5 rounded-lg text-sm font-medium transition-all ${state.searchType === 'jobs' ? 'bg-white text-indigo-500 shadow-sm' : 'text-slate-500 hover:text-indigo-400'}">ค้นหางาน</button>
                                    <button onclick="setSearchType('freelancers')" class="px-4 py-1.5 rounded-lg text-sm font-medium transition-all ${state.searchType === 'freelancers' ? 'bg-white text-indigo-500 shadow-sm' : 'text-slate-500 hover:text-indigo-400'}">หาฟรีแลนซ์</button>
                                </div>
                            </div>
                            
                            <div class="w-full md:w-auto flex gap-2">
                                <div class="relative flex-grow md:w-64">
                                    <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"></i>
                                    <input type="text" value="${state.searchQuery}" oninput="updateSearchQuery(this.value)" placeholder="${isJobs ? 'ค้นหาชื่องาน...' : 'ค้นหาชื่อ หรือ ทักษะ...'}" class="w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 text-slate-700 bg-white">
                                </div>
                            </div>
                        </div>

                        <div class="space-y-4 mb-12 animate-fade-in">
                            ${contentHtml}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderJobDetail() {
            const job = state.selectedJob;
            if (!job) return renderJobBoard();

            // Image Gallery HTML
            let imagesHtml = '';
            if (job.images.length > 0) {
                imagesHtml = '<div class="grid grid-cols-2 gap-4">';
                job.images.forEach((img, index) => {
                    const extraClass = (index === 0 && job.images.length === 3) ? 'col-span-2 h-64' : 'h-40';
                    imagesHtml += `
                        <div class="bg-slate-100 rounded-2xl overflow-hidden flex items-center justify-center relative group ${extraClass}">
                            <i data-lucide="image" class="text-slate-300 w-12 h-12"></i>
                            <div class="absolute inset-0 bg-indigo-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-sm">
                                <span class="text-xs font-medium bg-white px-3 py-1 rounded-full shadow-sm text-indigo-500">ดูรูปภาพ</span>
                            </div>
                        </div>
                    `;
                });
                imagesHtml += '</div>';
            } else {
                imagesHtml = '<div class="h-40 bg-slate-50 rounded-xl border border-dashed border-slate-200 flex items-center justify-center text-slate-400 text-sm">ไม่มีรูปภาพประกอบ</div>';
            }

            // Reviews HTML
            let reviewsHtml = '';
            if (job.reviews.length > 0) {
                reviewsHtml = '<div class="space-y-4">';
                job.reviews.forEach(review => {
                    reviewsHtml += `
                        <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm">
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-blue-50 border border-blue-100 rounded-full flex items-center justify-center text-xs font-bold text-blue-500">${review.user[0]}</div>
                                    <div>
                                        <p class="font-bold text-sm text-slate-800">${review.user}</p>
                                        <p class="text-xs text-slate-400">${review.date}</p>
                                    </div>
                                </div>
                                ${Stars(review.rating)}
                            </div>
                            <p class="text-sm text-slate-600 mt-2 pl-11">"${review.comment}"</p>
                        </div>
                    `;
                });
                reviewsHtml += '</div>';
            } else {
                reviewsHtml = '<p class="text-slate-500 text-sm">ยังไม่มีรีวิวสำหรับงานนี้</p>';
            }

            return `
                <div class="max-w-5xl mx-auto px-4 py-8 animate-slide-in">
                    ${Button('<i data-lucide="arrow-left" class="w-4 h-4"></i> กลับไปหน้าค้นหา', "setView('job-board')", 'ghost', 'mb-6 pl-0 hover:bg-transparent')}

                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="md:col-span-2 space-y-8">
                            <div>
                                <div class="flex gap-2 mb-3">
                                    ${job.tags.map(t => `<span class="px-2.5 py-1 bg-indigo-50 text-indigo-500 text-xs font-medium rounded-full border border-indigo-100">${t}</span>`).join('')}
                                </div>
                                <h1 class="text-3xl font-bold text-slate-800 mb-2">${job.title}</h1>
                                <p class="text-slate-500 flex items-center gap-2 text-sm">
                                    <i data-lucide="clock" class="w-4 h-4"></i> โพสต์เมื่อ ${job.posted}
                                </p>
                            </div>

                            ${imagesHtml}

                            <div>
                                <h3 class="text-lg font-bold text-slate-800 mb-3 border-b border-slate-100 pb-2">รายละเอียดงาน</h3>
                                <p class="text-slate-600 leading-relaxed whitespace-pre-line">${job.description}</p>
                            </div>

                            <div class="pt-4">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-lg font-bold text-slate-800">รีวิวผู้ว่าจ้าง (${job.reviewCount})</h3>
                                    <div class="flex items-center gap-2">
                                        <span class="text-2xl font-bold text-slate-800">${job.clientRating}</span>
                                        <div class="flex flex-col text-xs text-slate-500">
                                            ${Stars(job.clientRating)}
                                            <span>คะแนนเต็ม 5.0</span>
                                        </div>
                                    </div>
                                </div>
                                ${reviewsHtml}
                            </div>
                        </div>

                        <div class="space-y-6">
                            ${Card(`
                                <div class="flex flex-col items-center text-center mb-6">
                                    <div class="w-20 h-20 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center text-3xl font-bold text-indigo-400 mb-3 shadow-md border-4 border-white">
                                        ${job.client[0]}
                                    </div>
                                    <h3 class="font-bold text-lg text-slate-800">${job.clientFull}</h3>
                                    <p class="text-sm text-slate-500 flex items-center gap-1 mt-1">
                                        <i data-lucide="shield" class="w-3 h-3 text-teal-400 fill-current"></i> ยืนยันตัวตนแล้ว
                                    </p>
                                </div>
                                <div class="space-y-4 mb-6 pt-6 border-t border-slate-100">
                                    <div class="flex justify-between items-center text-sm">
                                        <span class="text-slate-500">งบประมาณ</span>
                                        <span class="font-bold text-xl text-indigo-500">${job.budget} ฿</span>
                                    </div>
                                    <div class="flex justify-between items-center text-sm">
                                        <span class="text-slate-500">สถานะ</span>
                                        <span class="bg-green-100 text-green-600 px-2 py-0.5 rounded-full text-xs font-medium">เปิดรับสมัคร</span>
                                    </div>
                                </div>
                                ${Button('เสนอราคา / สมัครงาน', `if(state.user) setView('payment'); else { setView('login'); showNotification('กรุณาล็อกอินก่อน', 'error'); }`, 'primary', 'w-full mb-3 shadow-indigo-200')}
                                ${Button('ส่งข้อความ', '', 'outline', 'w-full text-xs')}
                            `, '', 'p-6 border-t-4 border-t-indigo-300 shadow-indigo-50')}

                            <div class="bg-indigo-50/50 p-4 rounded-xl text-xs text-slate-500 space-y-2 border border-indigo-50">
                                <p class="flex items-center gap-2"><i data-lucide="check-circle" class="w-3 h-3 text-teal-400"></i> การชำระเงินได้รับการคุ้มครอง</p>
                                <p class="flex items-center gap-2"><i data-lucide="check-circle" class="w-3 h-3 text-teal-400"></i> ไม่มีการหักค่าธรรมเนียมแฝง</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderFreelancerDetail() {
            const f = state.selectedFreelancer;
            if (!f) return renderJobBoard();

            // Portfolio HTML
            let portfolioHtml = '';
            if (f.portfolio.length > 0) {
                portfolioHtml = '<div class="grid grid-cols-2 md:grid-cols-3 gap-4">';
                f.portfolio.forEach((item, i) => {
                    portfolioHtml += `
                        <div class="aspect-square bg-slate-100 rounded-xl flex items-center justify-center relative group overflow-hidden cursor-pointer hover:shadow-lg transition-all">
                             <i data-lucide="image" class="text-slate-300 w-8 h-8"></i>
                             <div class="absolute inset-0 bg-indigo-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-sm">
                                <span class="text-white text-xs font-medium border border-white px-3 py-1 rounded-full">ดูรูปภาพ</span>
                             </div>
                        </div>
                    `;
                });
                portfolioHtml += '</div>';
            } else {
                portfolioHtml = '<p class="text-slate-400 italic">ยังไม่มีผลงานอัปโหลด</p>';
            }

            return `
                 <div class="max-w-5xl mx-auto px-4 py-8 animate-slide-in">
                    ${Button('<i data-lucide="arrow-left" class="w-4 h-4"></i> กลับไปหน้าค้นหา', "setView('job-board')", 'ghost', 'mb-6 pl-0 hover:bg-transparent')}

                    <div class="grid md:grid-cols-3 gap-8">
                        <!-- Sidebar -->
                        <div class="space-y-6">
                            ${Card(`
                                <div class="w-24 h-24 bg-indigo-50 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl font-bold text-indigo-400 border-4 border-white shadow-sm">
                                    ${f.name[0]}
                                </div>
                                <h2 class="text-xl font-bold text-slate-800 flex items-center justify-center gap-1">
                                    ${f.name}
                                    ${f.verified ? '<i data-lucide="shield" class="w-4 h-4 text-teal-400 fill-current"></i>' : ''}
                                </h2>
                                <p class="text-slate-500 text-sm mb-4">${f.role}</p>
                                <div class="flex justify-center items-center gap-1 mb-6">
                                    <i data-lucide="star" class="w-4 h-4 text-amber-300 fill-current"></i>
                                    <span class="font-bold text-lg text-slate-700">${f.rating}</span>
                                    <span class="text-slate-400 text-sm">(จาก ${f.reviews.length} รีวิว)</span>
                                </div>
                                ${Button('จ้างงานทันที', `if(state.user) setView('payment'); else { setView('login'); showNotification('กรุณาล็อกอินก่อน', 'error'); }`, 'primary', 'w-full mb-2 shadow-indigo-200')}
                                ${Button('ส่งข้อความ', '', 'outline', 'w-full')}
                            `, '', 'p-6 text-center border-t-4 border-t-indigo-300 shadow-indigo-50')}
                            
                            ${Card(`
                                <div class="flex justify-between text-sm"><span class="text-slate-500">ค่าบริการเริ่มต้น</span><span class="font-bold text-indigo-500">${f.rate}</span></div>
                                <div class="flex justify-between text-sm pt-4"><span class="text-slate-500">สถานที่</span><span class="font-bold text-slate-700">${f.location}</span></div>
                                <div class="flex justify-between text-sm pt-4"><span class="text-slate-500">ประสบการณ์</span><span class="font-bold text-slate-700">${f.experience}</span></div>
                                <div class="flex justify-between text-sm pt-4"><span class="text-slate-500">งานที่สำเร็จ</span><span class="font-bold text-slate-700">${f.completedJobs} งาน</span></div>
                            `, '', 'p-5 space-y-4')}

                            <div class="flex flex-wrap gap-2">
                                ${f.skills.map(s => `<span class="bg-indigo-50 text-indigo-500 px-3 py-1 rounded-full text-xs font-medium border border-indigo-100">${s}</span>`).join('')}
                            </div>
                        </div>

                        <!-- Main -->
                        <div class="md:col-span-2 space-y-8">
                             <section>
                                <h3 class="text-lg font-bold text-slate-800 mb-3 border-b border-slate-100 pb-2">เกี่ยวกับฉัน</h3>
                                <p class="text-slate-600 leading-relaxed">${f.about}</p>
                             </section>

                             <section>
                                <h3 class="text-lg font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">บริการที่รับทำ (Services)</h3>
                                <div class="space-y-3">
                                    ${f.services.map(s => `
                                        <div class="flex justify-between items-center p-4 bg-white rounded-xl border border-slate-100 shadow-sm hover:border-indigo-200 hover:shadow-md transition-all">
                                            <span class="font-medium text-slate-700 flex items-center gap-2">
                                                <i data-lucide="check-circle" class="w-4 h-4 text-teal-400"></i> ${s.title}
                                            </span>
                                            <span class="font-bold text-indigo-500">${s.price}</span>
                                        </div>
                                    `).join('')}
                                </div>
                             </section>

                             <section>
                                <h3 class="text-lg font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">ผลงานที่ผ่านมา (Portfolio)</h3>
                                ${portfolioHtml}
                             </section>

                             <section>
                                <h3 class="text-lg font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">รีวิวจากผู้ว่าจ้าง (${f.reviews.length})</h3>
                                <div class="space-y-4">
                                    ${f.reviews.map(r => `
                                        <div class="bg-white p-5 rounded-xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow">
                                            <div class="flex justify-between items-start mb-2">
                                                <div class="flex items-center gap-3">
                                                    <div class="w-8 h-8 bg-pink-50 rounded-full flex items-center justify-center text-xs font-bold text-pink-500">${r.client[0]}</div>
                                                    <div>
                                                        <p class="font-bold text-sm text-slate-800">${r.client}</p>
                                                        <p class="text-xs text-slate-400">${r.date}</p>
                                                    </div>
                                                </div>
                                                ${Stars(r.rating)}
                                            </div>
                                            <p class="text-sm text-slate-600 mt-2 pl-11">"${r.comment}"</p>
                                        </div>
                                    `).join('')}
                                </div>
                             </section>
                        </div>
                    </div>
                 </div>
            `;
        }

        function renderDashboard() {
            const user = state.user;
            return `
                <div class="max-w-6xl mx-auto px-4 py-12 animate-slide-in">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4">
                        <div>
                            <h2 class="text-3xl font-bold text-slate-800">สวัสดี, ${user.name} 👋</h2>
                            <p class="text-slate-500 mt-1">จัดการงานและโปรไฟล์ของคุณได้ที่นี่</p>
                        </div>
                        <div class="flex gap-3">
                            ${Button('<i data-lucide="plus" class="w-4 h-4"></i> ลงงานใหม่', "setView('post-job')", 'primary', '!rounded-full shadow-indigo-200')}
                            ${Button('<i data-lucide="user" class="w-4 h-4"></i> โปรไฟล์', "setView('profile')", 'outline', '!rounded-full')}
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                         ${Card(`
                            <div><p class="text-sm font-medium text-slate-500 mb-1">งานที่กำลังทำ</p><p class="text-2xl font-bold text-slate-800">2</p></div>
                            <div class="w-12 h-12 rounded-2xl flex items-center justify-center bg-blue-100 text-blue-500"><div class="w-2 h-2 rounded-full bg-current opacity-60"></div></div>
                         `, '', 'p-6 flex items-center justify-between border-slate-100 hover:border-indigo-100')}
                         ${Card(`
                            <div><p class="text-sm font-medium text-slate-500 mb-1">ประกาศงาน</p><p class="text-2xl font-bold text-slate-800">5</p></div>
                            <div class="w-12 h-12 rounded-2xl flex items-center justify-center bg-teal-100 text-teal-600"><div class="w-2 h-2 rounded-full bg-current opacity-60"></div></div>
                         `, '', 'p-6 flex items-center justify-between border-slate-100 hover:border-indigo-100')}
                         ${Card(`
                            <div><p class="text-sm font-medium text-slate-500 mb-1">ข้อความใหม่</p><p class="text-2xl font-bold text-slate-800">3</p></div>
                            <div class="w-12 h-12 rounded-2xl flex items-center justify-center bg-purple-100 text-purple-500"><div class="w-2 h-2 rounded-full bg-current opacity-60"></div></div>
                         `, '', 'p-6 flex items-center justify-between border-slate-100 hover:border-indigo-100')}
                         ${Card(`
                            <div><p class="text-sm font-medium text-slate-500 mb-1">ยอดเงินคงเหลือ</p><p class="text-2xl font-bold text-slate-800">฿4,500</p></div>
                            <div class="w-12 h-12 rounded-2xl flex items-center justify-center bg-amber-100 text-amber-600"><div class="w-2 h-2 rounded-full bg-current opacity-60"></div></div>
                         `, '', 'p-6 flex items-center justify-between border-slate-100 hover:border-indigo-100')}
                    </div>

                    <!-- Recommended Jobs (Slice of Job Board logic) -->
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-slate-800">งานแนะนำล่าสุด</h3>
                            <button onclick="setView('job-board'); setSearchType('jobs')" class="text-sm text-slate-500 hover:text-indigo-500">ดูทั้งหมด</button>
                        </div>
                        <div class="grid lg:grid-cols-3 gap-8">
                             <div class="lg:col-span-2 space-y-4">
                                ${state.jobs.slice(0, 3).map(job => Card(`
                                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                                        <div>
                                            <h4 class="font-bold text-slate-800 text-lg group-hover:text-indigo-500 transition-colors">${job.title}</h4>
                                            <div class="flex gap-4 mt-2 text-sm text-slate-500">
                                                <span class="flex items-center gap-1"><i data-lucide="briefcase" class="w-3 h-3"></i> ${job.client}</span>
                                                <span class="flex items-center gap-1"><i data-lucide="clock" class="w-3 h-3"></i> ${job.posted}</span>
                                            </div>
                                        </div>
                                        <div class="flex flex-col items-start sm:items-end gap-3 min-w-[120px]">
                                            <span class="font-bold text-indigo-500">${job.budget} ฿</span>
                                            ${Button('จ้างงาน', `event.stopPropagation(); setView('payment')`, 'outline', '!py-1.5 !px-3 !text-xs w-full hover:bg-indigo-50')}
                                        </div>
                                    </div>
                                `, `selectJob(${job.id})`, 'p-6 group hover:border-indigo-200')).join('')}
                             </div>

                             <div>
                                <h3 class="text-lg font-bold text-slate-800 mb-4">ฟรีแลนซ์แนะนำ</h3>
                                <div class="space-y-4">
                                    ${MOCK_FREELANCERS.slice(0, 2).map(f => Card(`
                                        <div class="flex items-center gap-4 mb-3">
                                            <div class="w-12 h-12 bg-indigo-50 rounded-full flex items-center justify-center text-lg font-bold text-indigo-400">${f.name[0]}</div>
                                            <div>
                                                <h4 class="font-bold text-slate-800 text-sm flex items-center gap-1">
                                                    ${f.name}
                                                    ${f.verified ? '<i data-lucide="shield" class="w-3 h-3 text-teal-400 fill-current"></i>' : ''}
                                                </h4>
                                                <p class="text-xs text-slate-500">${f.role}</p>
                                            </div>
                                        </div>
                                        <div class="flex justify-between items-center text-sm border-t border-slate-100 pt-3 mt-2">
                                            <span class="font-medium text-slate-800">${f.rate}</span>
                                            <span class="flex items-center gap-1 text-amber-300 text-xs"><i data-lucide="star" class="w-3 h-3 fill-current"></i> ${f.rating}</span>
                                        </div>
                                        ${Button('จ้างงาน', `event.stopPropagation(); setView('payment')`, 'secondary', 'w-full mt-3 !text-xs !py-2')}
                                    `, `selectFreelancer(${f.id})`, 'p-5 cursor-pointer hover:border-indigo-200')).join('')}
                                </div>
                             </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderProfile() {
            const user = state.user;
            return `
                <div class="max-w-2xl mx-auto px-4 py-12">
                    ${Button('<i data-lucide="arrow-left" class="w-4 h-4"></i> กลับไปหน้าแดชบอร์ด', "setView('dashboard')", 'ghost', 'mb-6 pl-0 hover:bg-transparent')}
                    
                    ${Card(`
                        <div class="flex items-center justify-between mb-8">
                            <h2 class="text-2xl font-bold text-slate-800">แก้ไขโปรไฟล์</h2>
                            <span class="text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full">Active</span>
                        </div>
                        
                        <div class="flex items-center gap-6 mb-8">
                            <div class="w-24 h-24 bg-indigo-50 rounded-full flex items-center justify-center text-3xl font-bold text-indigo-300 border-2 border-dashed border-indigo-200 cursor-pointer hover:border-indigo-400 hover:text-indigo-400 transition-all relative overflow-hidden group">
                                ${user.name[0]}
                                <div class="absolute inset-0 bg-indigo-900/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-sm">
                                    <i data-lucide="image" class="text-white w-6 h-6"></i>
                                </div>
                            </div>
                            <div>
                                ${Button('อัปโหลดรูปภาพ', "showNotification('จำลองการอัปโหลดรูปภาพ', 'success')", 'outline', 'text-xs')}
                                <p class="text-xs text-slate-400 mt-2">รองรับ JPG, PNG ขนาดไม่เกิน 2MB</p>
                            </div>
                        </div>

                        <form>
                            <div class="grid md:grid-cols-2 gap-4">
                                ${Input('ชื่อจริง', 'text', '', user.name)}
                                ${Input('ตำแหน่งงาน', 'text', 'ระบุตำแหน่ง')}
                            </div>
                            ${Input('ทักษะ', 'text', 'คั่นด้วยจุลภาค', user.skills)}
                            ${Input('เกี่ยวกับฉัน', 'text', 'เขียนแนะนำตัวสั้นๆ...', user.bio, '', true)}

                            <div class="pt-6 border-t border-slate-100 flex justify-end gap-3">
                                ${Button('ยกเลิก', "setView('dashboard')", 'ghost')}
                                ${Button('บันทึกการเปลี่ยนแปลง', "setView('dashboard'); showNotification('บันทึกข้อมูลเรียบร้อย');", 'primary')}
                            </div>
                        </form>
                    `, '', 'p-8 shadow-indigo-50 border-indigo-100')}
                </div>
            `;
        }

        function renderPostJob() {
            return `
                <div class="max-w-2xl mx-auto px-4 py-12">
                    ${Button('<i data-lucide="arrow-left" class="w-4 h-4"></i> ย้อนกลับ', "setView('dashboard')", 'ghost', 'mb-6 pl-0 hover:bg-transparent')}
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800">ลงประกาศงานฟรีแลนซ์</h2>
                        <p class="text-slate-500 mt-2">ระบุรายละเอียดเพื่อให้ได้ฟรีแลนซ์ที่ตรงใจที่สุด</p>
                    </div>

                    ${Card(`
                        <form onsubmit="event.preventDefault(); 
                            state.jobs.unshift({
                                id: Date.now(),
                                title: this.title.value || 'โปรเจกต์ใหม่',
                                client: state.user.name,
                                clientFull: state.user.name + ' Ltd.',
                                budget: this.budget.value || 'ต่อรองได้',
                                tags: ['New', 'Hiring'],
                                posted: 'เมื่อสักครู่',
                                description: this.desc.value || 'รายละเอียด...',
                                clientRating: 5.0,
                                reviewCount: 0,
                                reviews: [],
                                images: []
                            });
                            setView('job-board');
                            setSearchType('jobs');
                            showNotification('ลงประกาศงานเรียบร้อยแล้ว');">
                            
                            ${Input('ชื่องาน', 'text', 'เช่น ออกแบบโลโก้...', '', "this.form.title.value = this.value")}
                            <div class="grid md:grid-cols-2 gap-4">
                                ${Input('งบประมาณ (บาท)', 'number', 'เช่น 5000', '', "this.form.budget.value = this.value")}
                                ${Input('ระยะเวลาดำเนินงาน', 'text', 'เช่น 3 วัน')}
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-slate-600 mb-1.5">ประเภทงาน</label>
                                <select class="w-full px-4 py-2.5 rounded-xl border border-slate-200 bg-slate-50 outline-none text-slate-700 focus:ring-2 focus:ring-indigo-100 focus:border-indigo-400 transition-all">
                                    <option>Graphic & Design</option>
                                    <option>Web & Programming</option>
                                    <option>Writing & Translation</option>
                                </select>
                            </div>
                            ${Input('รายละเอียดงาน', 'text', 'อธิบายขอบเขตงาน...', '', "this.form.desc.value = this.value", true)}
                            
                            ${Button('ลงประกาศงาน', '', 'primary', 'w-full mt-4 !py-3 shadow-indigo-200')}
                        </form>
                    `, '', 'p-8 shadow-indigo-50 border-indigo-100')}
                </div>
            `;
        }

        function renderPayment() {
            return `
                <div class="max-w-lg mx-auto px-4 py-12 min-h-[80vh] flex flex-col justify-center">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-500">
                            <i data-lucide="dollar-sign" class="w-8 h-8"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-slate-800">ยืนยันการจ้างงาน/ชำระเงิน</h2>
                        <p class="text-slate-500">เงินของคุณจะถูกพักไว้ในระบบจนกว่างานจะเสร็จสิ้น</p>
                    </div>

                    ${Card(`
                        <div class="flex justify-between items-center mb-6 pb-6 border-b border-slate-100">
                            <div>
                                <p class="text-sm text-slate-500">ยอดรวมโดยประมาณ</p>
                                <h3 class="text-3xl font-bold text-indigo-500">฿5,000.00</h3>
                            </div>
                            <div class="text-right">
                                <p class="text-xs text-slate-400">Order ID</p>
                                <p class="font-mono text-sm text-slate-600">#FL-8823</p>
                            </div>
                        </div>

                        <form onsubmit="event.preventDefault(); setView('dashboard'); showNotification('ดำเนินการสำเร็จ!');">
                            ${Input('หมายเลขบัตรเครดิต', 'text', '0000 0000 0000 0000')}
                            <div class="grid grid-cols-2 gap-4">
                                ${Input('วันหมดอายุ', 'text', 'MM/YY')}
                                ${Input('CVC', 'password', '123')}
                            </div>
                            ${Input('ชื่อบนบัตร', 'text', 'NAME SURNAME')}
                            
                            ${Button(`<span>ยืนยันและชำระเงิน</span> <i data-lucide="chevron-right" class="w-4 h-4"></i>`, '', 'primary', 'w-full mt-6 !py-3 flex justify-between items-center shadow-indigo-200')}
                        </form>
                        
                        <div class="mt-6 flex items-center justify-center gap-2 text-xs text-slate-400">
                            <div class="w-2 h-2 bg-teal-400 rounded-full"></div> 256-bit SSL Secured
                        </div>
                    `, '', 'p-6 md:p-8 border-t-4 border-t-indigo-400 shadow-indigo-50')}
                    
                    ${Button('ยกเลิกและกลับไปหน้าหลัก', "setView('dashboard')", 'ghost', 'mt-6 mx-auto')}
                </div>
            `;
        }

        function renderFooter() {
            return `
                <footer class="bg-slate-50 py-12 border-t border-indigo-50 mt-auto">
                    <div class="max-w-6xl mx-auto px-4 text-center">
                        <p class="font-bold text-xl mb-4 text-indigo-400">Freeland</p>
                        <p class="text-slate-400 text-sm">© 2026 Freeland Platform. พื้นที่อิสระของคนทำงาน</p>
                    </div>
                </footer>
            `;
        }

        // --- Main Render Function ---
        function render() {
            const app = document.getElementById('app');
            let content = renderNavbar();

            switch (state.view) {
                case 'home': content += renderHome(); break;
                case 'login': content += renderAuth(false); break;
                case 'register': content += renderAuth(true); break;
                case 'dashboard': content += renderDashboard(); break;
                case 'job-board': content += renderJobBoard(); break;
                case 'job-detail': content += renderJobDetail(); break;
                case 'freelancer-detail': content += renderFreelancerDetail(); break;
                case 'profile': content += renderProfile(); break;
                case 'post-job': content += renderPostJob(); break;
                case 'payment': content += renderPayment(); break;
            }

            content += renderFooter();
            app.innerHTML = content;
            
            // Re-initialize icons after DOM update
            lucide.createIcons();
        }

        // --- Initial Render ---
        document.addEventListener('DOMContentLoaded', () => {
            render();
            // Optional: Check if we want to simulate logged in state or animations
        });

    </script>
    <style>
        /* Custom Animations */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        .animate-slide-in { animation: slideIn 0.4s ease-out; }
    </style>
</body>
</html>